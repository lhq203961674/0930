	•	SFTP通信とSSHプロトコルの関係性
SFTPは独立した通信プロトコルではなく、SSHプロトコル上で動作するファイル転送方式であり、通信の実体はSSH接続に依存している。そのため、ネットワーク設計やセキュリティルールにおいてSFTP通信を許可する場合、プロトコルはSSH、転送層はTCP、使用ポートは22番として定義される。SFTPという名称は機能的な呼称であり、通信制御の観点ではSSH通信として扱う必要がある。
	•	ICMPプロトコルにポート番号が存在しない理由
ICMPはIPと同じネットワーク層に属する制御用プロトコルであり、アプリケーション間のデータ転送を目的としたものではない。そのため、TCPやUDPのように通信プロセスを識別するためのポート番号を必要とせず、通信内容はTypeおよびCodeによって識別される。ICMPは主に疎通確認やエラー通知を目的として使用され、業務通信とは明確に役割が分離されている。
	•	ポート番号の概念が適用されるプロトコル範囲
ポート番号はトランスポート層において通信を行うプロセスを識別するための仕組みであり、TCPおよびUDPにのみ適用される概念である。ICMPのようなネットワーク層プロトコルにはポートの概念が存在しないため、セキュリティ設定やQA表においてICMP通信のポート欄は未指定、またはN/Aとして記載することが適切となる。
	•	通信方向を明確にしたルール設計の重要性
ネットワーク制御ルールを設計する際には、通信の方向、接続元および接続先を明確に定義することが不可欠である。例えば、MORSコンテナ基盤のBlue面およびGreen面からPRIMAs本番APサーバへの通信については、片方向通信として明示することで、不要な通信許可や想定外のアクセスを防止できる。方向定義の曖昧さはセキュリティリスクに直結する。
	•	リリース後に実施するSFTP通信確認の目的
本番リリース後にMORSからPRIMAsへSFTPダミーファイルの送受信を実施することで、ネットワーク設定、セキュリティルール、認証情報およびアプリケーション処理が正常に連携しているかを総合的に確認できる。この確認作業は単なる疎通試験ではなく、本番環境における実運用を想定した重要な検証工程に位置付けられる。
	•	最小権限を前提とした通信許可設計の考え方
セキュリティ設計においては、業務上必要最小限のプロトコルおよびポートのみを許可することが基本方針となる。ファイル連携用途ではSFTP用のTCP22番のみを許可し、ICMPについては疎通確認が必要な場合に限定して許可することで、攻撃対象領域を最小化し、システム全体の安全性を高めることができる。
